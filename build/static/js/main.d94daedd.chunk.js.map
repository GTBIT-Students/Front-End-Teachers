{"version":3,"sources":["components/Common/PNotify.js","components/Common/Encrypt.js","components/Common/Axios.js","components/Common/Loader.jsx","components/Login/Login.js","routes.jsx","index.js","components/Login/login.module.css"],"names":["PNotify","defaults","styling","icons","delay","encrypt","salt","textToChars","text","split","map","c","charCodeAt","byteHex","n","Number","toString","substr","applySaltToChar","code","reduce","a","b","join","cipher","decrypt","encoded","match","hex","parseInt","charCode","String","fromCharCode","decipher","EncryptToken","token","DecryptToken","options","domain","AxiosPost","endpoint","body","handleSuccess","handleErr","axios","post","then","res","status","catch","err","console","log","document","cookie","val","pop","headers","Authorization","getToken","Loader","children","active","spinner","CircularProgress","className","styles","overlay","base","background","minHeight","style","Login","useState","username","password","checked","data","setData","loading","setLoading","showLogin","setShowLogin","handleChange","e","value","name","target","saveToLocalStorage","localStorage","setItem","encryptedToken","window","location","pathname","swal","useEffect","Storage","getItem","uname","pass","fetchData","Container","height","display","flexDirection","justifyContent","padding","boxSizing","Row","Col","Card","boxShadow","logincard","Header","bg","fontSize","Body","autoComplete","onSubmit","preventDefault","undefined","TextField","fullWidth","id","label","variant","onChange","required","FormControlLabel","control","Checkbox","color","Button","type","sm","to","Skeleton","animation","Routes","state","Component","ReactDOM","render","exact","path","component","getElementById","module","exports"],"mappings":"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","file":"static/js/main.d94daedd.chunk.js","sourcesContent":["import PNotify from \"pnotify/dist/es/PNotify\";\nPNotify.defaults.styling = \"bootstrap4\";\nPNotify.defaults.icons = \"fontawesome5\";\nPNotify.defaults.delay = 5000;\n\nexport default (text = \"Something Went Wrong.Try again!\", type = \"error\") => {\n  PNotify.alert({\n    text: text,\n    type: type,\n  });\n};\n","const cipher = (salt) => {\n  const textToChars = (text) => text.split(\"\").map((c) => c.charCodeAt(0));\n  const byteHex = (n) => (\"0\" + Number(n).toString(16)).substr(-2);\n  const applySaltToChar = (code) =>\n    textToChars(salt).reduce((a, b) => a ^ b, code);\n\n  return (text) =>\n    text.split(\"\").map(textToChars).map(applySaltToChar).map(byteHex).join(\"\");\n};\n\nconst decipher = (salt) => {\n  const textToChars = (text) => text.split(\"\").map((c) => c.charCodeAt(0));\n  const applySaltToChar = (code) =>\n    textToChars(salt).reduce((a, b) => a ^ b, code);\n  return (encoded) =>\n    encoded\n      .match(/.{1,2}/g)\n      .map((hex) => parseInt(hex, 16))\n      .map(applySaltToChar)\n      .map((charCode) => String.fromCharCode(charCode))\n      .join(\"\");\n};\n\nconst encrypt = cipher(\"@35#456\"); // Salt = \"R@G|-|@v\"\nconst decrypt = decipher(\"@35#456\"); // Salt = \"R@G|-|@v\"\n\nfunction EncryptToken(token) {\n // console.log(\"token passed for encry:\", token);\n  return encrypt(token);\n}\n\nfunction DecryptToken(token) {\n // console.log(\"token passed for decry:\", token);\n  return decrypt(token);\n}\nexport { EncryptToken, DecryptToken };\n","import axios from \"axios\";\nimport PNotify from \"./PNotify\";\nimport { DecryptToken } from \"./Encrypt\";\n\n// const domain = \"http://127.0.0.1:8000\";\nconst domain = \"https://gtbit-backend.herokuapp.com\";\n\nlet token, options;\nfunction getToken() {\n  console.log(\"geting tooken\");\n  var b = document.cookie.match(\"(^|[^;]+)\\\\s*\" + \"token\" + \"\\\\s*=\\\\s*([^;]+)\");\n  if (b) {\n    let val = b.pop();\n\n    token = DecryptToken(val);\n    options = {\n      headers: {\n        // Authorization: \"Token 5292645558db342649f9c41b50edd7db560962d2\",\n        Authorization: \"Token \" + token,\n      },\n    };\n    //console.log(\"decrypted token:\", token);\n    //console.log(\"options:\", options);\n  } else {\n    options = {};\n    //console.log(\"options:\", options);\n  }\n}\ngetToken();\n\nfunction AxiosGet(endpoint, handleSuccess, handleErr) {\n  axios\n    .get(`${domain}${endpoint}`, options)\n    .then((res) => {\n      if (res.status === 200) handleSuccess(res);\n    })\n    .catch((err) => {\n      handleErr(err);\n      console.log(err);\n    });\n}\n\nfunction AxiosPost(endpoint, body, handleSuccess, handleErr) {\n  axios\n    .post(`${domain}${endpoint}`, body, options)\n    .then((res) => {\n      if (res.status === 200) handleSuccess(res);\n    })\n    .catch((err) => {\n      handleErr(err);\n      console.log(err);\n    });\n}\n\nfunction AxiosDelete(endpoint,body, handleSuccess, handleErr) {\n  axios\n    .delete(`${domain}${endpoint}`,{...options,data:body})\n    .then((res) => {\n      if (res.status === 200) handleSuccess(res);\n    })\n    .catch((err) => {\n      \n      handleErr(err);\n      console.log(err);\n    });\n}\n\nfunction AxiosPut(endpoint, body, handleSuccess, handleErr) {\n  axios\n    .put(`${domain}${endpoint}`, body, options)\n    .then((res) => {\n      if (res.status === 200) handleSuccess(res);\n    })\n    .catch((err) => {\n      handleErr(err);\n      console.log(err);\n    });\n}\n\n\nexport { AxiosGet, AxiosPost, AxiosDelete,AxiosPut };\n","import React from \"react\";\nimport LoadingOverlay from \"react-loading-overlay\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\n\nfunction Loader({ children, active }) {\n  return (\n    <>\n      <LoadingOverlay\n        active={active}\n        spinner={<CircularProgress className=\"text-dark\" />}\n        styles={{\n          overlay: (base) => ({\n            ...base,\n            background: \"rgba(0,0,0,0.1)\",\n            minHeight:'50px'\n          }),\n        }}\n        style={{ background: \"none\" }}\n      >\n        {children}\n      </LoadingOverlay>\n    </>\n  );\n}\n\nexport default Loader;\n","import React, { useState, useEffect } from \"react\";\nimport style from \"./login.module.css\";\nimport { Card, Row, Col, Container } from \"react-bootstrap\";\nimport TextField from \"@material-ui/core/TextField\";\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\nimport Checkbox from \"@material-ui/core/Checkbox\";\n//import SendIcon from \"@material-ui/icons/Send\";\nimport Button from \"@material-ui/core/Button\";\n//import PNotify from \"../Common/PNotify\";\n//import AccountCircleIcon from \"@material-ui/icons/AccountCircle\";\nimport { AxiosPost } from \"../Common/Axios\";\nimport { EncryptToken, DecryptToken } from \"../Common/Encrypt\";\n//import { useHistory } from \"react-router-dom\";\nimport { Link } from \"react-router-dom\";\nimport Loader from \"../Common/Loader\";\nimport swal from \"sweetalert\";\nimport Skeleton from '@material-ui/lab/Skeleton';\n\nfunction Login() {\n  document.body.style.background = \"rgb(244,245,246)\";\n  const [data, setData] = useState({\n    username: \"\",\n    password: \"\",\n    checked: false,\n  });\n  const [loading, setLoading] = useState(false);\nconst [showLogin,setShowLogin]=useState(false)\n\n  useEffect(() => {\n    console.log(\"fetching...name and pass \");\n    async function fetchData() {\n      if (typeof Storage !== \"undefined\") {\n        if(localStorage.getItem(\"uname\") && localStorage.getItem(\"pass\")){\n          let uname =await  DecryptToken(localStorage.getItem(\"uname\"));\n          let pass =await DecryptToken(localStorage.getItem(\"pass\"));\n          let token =await document.cookie.match(\"(^|[^;]+)\\\\s*\" + \"token\" + \"\\\\s*=\\\\s*([^;]+)\");\n          if(token) token=token.pop();\n          console.log(uname, pass,token);\n          let body={username:uname,password:pass}\n          console.log(body);\n          setData({username:uname})\n          if(uname && pass && token)\n          AxiosPost(\"/api/v1/token/authorize\", body, handleSuccess, ()=>{console.log('handleerror');setShowLogin(true);});\n          else setShowLogin(true)\n        }\n        else{\n          console.log('uname pass not found');\n          setShowLogin(true)\n        }\n      } else {\n        setShowLogin(true)\n        console.log(\"Sorry! No Web Storage support..\");\n      }\n    }\n    fetchData();\n  }, []);\n  function handleChange(e) {\n    let name = e.target.name;\n    let value;\n    if (name === \"checked\") value = e.target.checked;\n    else value = e.target.value;\n\n    setData({ ...data, [name]: value });\n  }\n  async function saveToLocalStorage() {\n    console.log(\"checked\");\n    localStorage.setItem(\"uname\", await EncryptToken(data.username));\n    localStorage.setItem(\"pass\", await EncryptToken(data.password));\n  }\n\n\n  async function handleSuccess(res) {\n    if (res.data.token) {\n      let encryptedToken = await EncryptToken(res.data.token);\n      document.cookie = `token=${encryptedToken};`;\n      // history.push(\"/admin\");\n      if (data.checked) saveToLocalStorage();\n    else console.log(\"not checked\");\n      window.location.pathname = \"/admin\";\n      setLoading(false);\n    }\n  }\n  async function handleErr(err) {\n    swal(\"Authentication Failed\", \"\", \"error\");\n    setLoading(false);\n  }\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    setLoading(true);\n    \n    console.log(\"Login submit called\");\n    let body = { ...data, checked: undefined };\n    AxiosPost(\"/api/v1/token/authorize\", body, handleSuccess, handleErr);\n  }\n\n  return (\n    <Container\n      style={{\n        height: \"100vh\",\n        display: \"flex\",\n        flexDirection: \"column\",\n        justifyContent: \"center\",\n        padding: \"1em 0\",\n        boxSizing: \"border-box\",\n      }}\n    >\n      <Row>\n        <Col>\n          <Card\n            style={{ boxShadow: \"rgba(0, 0, 0, 0.05) 0px 5px 16px 0px\" }}\n            className={\"mx-auto \" + style.logincard}\n          >\n    {showLogin?\n            <Loader active={loading}>\n              {/* <Card.Img variant=\"top\" src={Logo} /> */}\n              <Card.Header bg=\"info\" className=\"text-center\">\n                <span style={{ fontSize: \"1.5rem\" }}>Sign In</span>\n                {/* <AccountCircleIcon style={{fontSize:'2rem'}}/> */}\n              </Card.Header>\n              <Card.Body>\n                <br />\n                <form autoComplete=\"off\" onSubmit={handleSubmit}>\n                  <TextField\n                    fullWidth\n                    id=\"outlined-basic\"\n                    label=\"Enter Username\"\n                    variant=\"outlined\"\n                    className=\"mb-3\"\n                    name=\"username\"\n                    value={data.username}\n                    onChange={handleChange}\n                    required={true}\n                  />\n\n                  <TextField\n                    fullWidth\n                    id=\"outlined-basic\"\n                    label=\"Enter Password\"\n                    variant=\"outlined\"\n                    className=\"mb-3\"\n                    name=\"password\"\n                    value={data.password}\n                    onChange={handleChange}\n                    required={true}\n                  />\n\n                  <FormControlLabel\n                    control={\n                      <Checkbox\n                        checked={data.checked}\n                        onChange={handleChange}\n                        name=\"checked\"\n                        color=\"primary\"\n                      />\n                    }\n                    label=\"Remember me\"\n                  />\n                  <Row className=\"justify-content-center\">\n                    <Button variant=\"contained\" color=\"primary\" type=\"submit\">\n                      Sign In\n                    </Button>\n                  </Row>\n                  <Row className=\"mt-2\">\n                    <Col sm=\"8\">\n                      <Link to=\"/\">Forgot Password?</Link>\n                    </Col>\n                    {/* <Col sm=\"8\">\n                      <Link to=\"/\">Register</Link>\n                    </Col> */}\n                  </Row>\n                </form>\n              </Card.Body>\n            </Loader>\n     :<>\n      <Skeleton animation=\"wave\" />\n      <Skeleton animation={false} />\n      <Skeleton variant=\"rect\"  height={218} />\n      <Skeleton animation={false} />\n      <Skeleton animation=\"wave\" />\n      </>\n    }\n          </Card>\n\n        </Col>\n      </Row>\n     \n    </Container>\n  );\n}\n\nexport default Login;\n","import React, { Component } from \"react\";\nimport Login from \"./components/Login/Login\";\n\nclass Routes extends Component {\n  state = {};\n  render() {\n    return (\n      <>\n        <Login />\n      </>\n    );\n  }\n}\n\nexport default Routes;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { BrowserRouter, Route } from \"react-router-dom\";\nimport Routes from \"./routes\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport Login from \"./components/Login/Login\";\n\nReactDOM.render(\n  <BrowserRouter>\n    <Route exact path=\"/\" component={Routes} />\n\n    <Route path=\"/login\" component={Login} />\n  </BrowserRouter>,\n  document.getElementById(\"root\")\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"logincard\":\"login_logincard__2ieks\"};"],"sourceRoot":""}